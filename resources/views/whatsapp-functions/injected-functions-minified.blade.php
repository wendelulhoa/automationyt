window.WAPIWU={},window.WAPIWU.getGroupMetadata=async e=>await require("WAWebDBGroupsGroupMetadata").getGroupMetadata(e),window.WAPIWU.getGroupParticipants=async e=>await require("WAWebSchemaParticipant").getParticipantTable().get(e),window.WAPIWU.setGroups=async e=>{window.WAPIWU.groups=[],await require("WAWebSchemaChat").getChatTable().all().then(e=>{e.forEach(async e=>{let a=await window.WAPIWU.getGroupMetadata(e.id);if(a){let t=await window.WAPIWU.getGroupParticipants(e.id);a.participants=t,window.WAPIWU.groups.push(a)}})})},window.WAPIWU.getAllGroups=async()=>{try{return await window.WAPIWU.setGroups(),{success:!0,groups:window.WAPIWU.groups}}catch(e){return{success:!1,message:"Erro ao buscar os grupos"}}},window.WAPIWU.setGroupSubject=async(e,a)=>{try{var t,r,s,o=await require("WAWebGroupModifyInfoJob").setGroupSubject(require("WAWebWidFactory").createWid(e),a);return{success:!0,message:"Alterado com sucesso"}}catch(i){return{success:!1,message:"Erro ao alterar",error:i}}},window.WAPIWU.setGroupDescription=async(e,a)=>{try{var t,r,s,o=require("WAWebGroupModifyInfoJob");return await o.setGroupDescription(require("WAWebWidFactory").createWid(e),a,require("WAHex").randomHex(8),(await require("WAWebDBGroupsGroupMetadata").getGroupMetadata(e)).descId),{success:!0,message:"Alterado com sucesso"}}catch(i){return{success:!1,message:"Erro ao alterar"}}},window.WAPIWU.setGroupProperty=async(e,a,t)=>{try{let r=require("WAWebGroupConstants"),s={1:r.GROUP_SETTING_TYPE.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,2:r.GROUP_SETTING_TYPE.ANNOUNCEMENT,3:r.GROUP_SETTING_TYPE.EPHEMERAL,4:r.GROUP_SETTING_TYPE.MEMBERSHIP_APPROVAL_MODE,5:r.GROUP_SETTING_TYPE.NO_FREQUENTLY_FORWARDED,6:r.GROUP_SETTING_TYPE.REPORT_TO_ADMIN_MODE,7:r.GROUP_SETTING_TYPE.RESTRICT};var o,i,c,n=await require("WAWebGroupModifyInfoJob").setGroupProperty(require("WAWebWidFactory").createWid(e),s[a],t);return{success:"SetPropertyResponseSuccess"==n,message:"Alterado com sucesso"}}catch(d){return{success:!1,message:"Erro ao alterar"}}},window.WAPIWU.sendTextMsgToChat=async(e,a)=>{try{var t,r,s=await require("WAWebSendTextMsgChatAction").sendTextMsgToChat(require("WAWebCollections").Chat.get(e),a,{}),o="OK"==s.messageSendResult;return{success:o,message:o?"Enviado com sucesso":`Erro ao enviar: ${s}`,chatId:e,text:a,response:s}}catch(i){return{success:!1,message:`Erro ao enviar catch: ${i}`,chatId:e,text:a}}},window.WAPIWU.getGroupInviteLink=async e=>{try{var a=await require("WAWebMexFetchGroupInviteCodeJob").fetchMexGroupInviteCode(e);return{success:!0,message:"Enviado com sucesso",link:`https://chat.whatsapp.com/${a}`}}catch(t){return{success:!1,message:"Erro ao enviar catch",error:t,groupId:e}}},window.WAPIWU.getConfigsSend=async(e,a="")=>{var t,r,s,o=await require("WAWebMsgDataUtils").genOutgoingMsgData(require("WAWebCollections").Chat.get("120363298399150006@g.us"),window.fileSend.type),i={"image/jpeg":"image","image/png":"image","image/gif":"gif","video/webm":"video","video/mp4":"video"};return o.body=e._mediaData.preview,o.filehash=e._mediaData.filehash,o.type=i[window.fileSend.type],o.agentId=void 0,o.isNewMsg=!0,o.local=!0,o.ack=0,o.caption=a,o.mentionedJidList=[],o.groupMentions=[],o.ephemeralSettingTimestamp=null,o.disappearingModeInitiator="chat",o.size=window.fileSend.size,o.isVcardOverMmsDocument=!1,o.filename=void 0,o.mimetype=window.fileSend.type,o.isViewOnce=!1,o.ctwaContext=void 0,o.ephemeralDuration=604800,o.footer=void 0,o.forwardedFromWeb=void 0,o.forwardedNewsletterMessageInfo=void 0,o.forwardingScore=void 0,o.gifAttribution=void 0,o.height=187,o.width=198,o.streamingSidecar=void 0,o.isAvatar=void 0,o.isForwarded=void 0,o.isGif=void 0,o.messageSecret=void 0,multicast=void 0,o.pageCount=void 0,o.quotedMsg=void 0,o.quotedParticipant=void 0,o.quotedRemoteJid=void 0,o.quotedStanzaID=void 0,o.staticUrl="",o.subtype=void 0,o},window.WAPIWU.sendFile=async(e,a)=>{try{var t,r,s=await require("WAWebMedia").prepRawMedia(await require("WAWebMediaOpaqueData").createFromData(window.fileSend,window.fileSend.type),{}),o=s._mediaData;o.set({mediaPrep:s});var i,c,n=require("WAWebCollections").Chat.get(e),d=await o.mediaPrep.sendToChat(n,require("WAWebMsgCollection").MsgCollection.add(await window.WAPIWU.getConfigsSend(s,a))[0]),u="OK"==d.messageSendResult;return{success:u,message:u?"Arquivo enviado com sucesso":"Erro ao enviar o arquivo",response:d}}catch(W){return{success:!1,message:"Erro ao enviar o arquivo a",error:W}}},window.WAPIWU.createGroup=async(e,a=[])=>{try{var t=require("WAWebCreateGroupAction");let r={title:e,ephemeralDuration:0,restrict:!1,announce:!1,membershipApprovalMode:!1,memberAddMode:!1},s=await t.createGroup(r,a),o="g.us"==s.server,i=await require("WAWebDBGroupsGroupMetadata").getGroupMetadata(s._serialized);return{success:o,message:o?"Grupo criado com sucesso":"Erro ao criar grupo",metadata:i}}catch(c){return{success:!1,message:"Erro ao criar grupo",error:c}}},window.WAPIWU.sleep=async e=>new Promise(a=>setTimeout(a,e)),window.WAPIWU.getQrCode=async()=>{let e=0;for(;e<3e4;)try{var a="//*/div/div[2]/div[3]/div[1]/div/div/div[2]/div",t=document.evaluate(a,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,r=t?t.getAttribute("data-ref"):null;if(null!==r)return{success:!0,qrCode:r,message:"QR gerado com sucesso"};await window.WAPIWU.sleep(1e3),e+=1e3}catch(s){return{success:!1,error:s.message,qrCode:null,aq:"a"}}return{success:!1,error:"QR code n\xe3o encontrado em 30 segundos",qrCode:null}},window.WAPIWU.disableAutoDownloads=()=>{var e=require("WAWebUserPrefsGeneral");return e.setAutoDownloadPhotos(!1),e.setAutoDownloadAudio(!1),e.setAutoDownloadVideos(!1),e.setAutoDownloadDocuments(!1),!0},window.WAPIWU.disableAutoDownloads();